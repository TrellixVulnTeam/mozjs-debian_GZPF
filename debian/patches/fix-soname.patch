From: Laszlo Boszormenyi (GCS) <gcs@debian.org>
Date: Fri, 02 May 2014 22:20:45 +0200
Subject: fix soname

Add soname switch to linker, regardless of Operating System

Bug-Debian: http://bugs.debian.org/746705
---
 config/rules.mk | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/config/rules.mk b/config/rules.mk
index a21128c..4b40fa0 100644
--- a/config/rules.mk
+++ b/config/rules.mk
@@ -418,15 +418,16 @@ endif # AIX
 #
 # Linux: add -Bsymbolic flag for components
 #
-ifeq ($(OS_ARCH),Linux)
+#ifeq ($(OS_ARCH),Linux)
 ifdef IS_COMPONENT
 EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic
 endif
 ifdef LD_VERSION_SCRIPT
 EXTRA_DSO_LDOPTS += -Wl,--version-script,$(LD_VERSION_SCRIPT)
+EXTRA_DSO_LDOPTS += -Wl,-soname,lib$(LIBRARY_NAME).so.0
 EXTRA_DEPS += $(LD_VERSION_SCRIPT)
 endif
-endif
+#endif
 
 ifdef SYMBOLS_FILE
 ifeq ($(OS_TARGET),WINNT)
